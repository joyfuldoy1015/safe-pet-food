"use strict";(()=>{var r={};r.id=9466,r.ids=[9466],r.modules={517:r=>{r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7147:r=>{r.exports=require("fs")},1017:r=>{r.exports=require("path")},6331:(r,e,t)=>{t.r(e),t.d(e,{headerHooks:()=>w,originalPathname:()=>P,patchFetch:()=>q,requestAsyncStorage:()=>j,routeModule:()=>g,serverHooks:()=>S,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>x});var o={};t.r(o),t.d(o,{GET:()=>h,POST:()=>y});var n=t(5419),u=t(9108),s=t(9678),a=t(8070),i=t(7147),c=t.n(i),p=t(1017),d=t.n(p);let l=d().join(process.cwd(),"data","product-counts.json");function f(){let r=d().dirname(l);c().existsSync(r)||c().mkdirSync(r,{recursive:!0})}function m(){try{if(f(),c().existsSync(l)){let r=c().readFileSync(l,"utf8");return JSON.parse(r)}}catch(r){console.error("Error reading product counts:",r)}return{}}async function h(r){try{let{searchParams:e}=new URL(r.url),t=e.get("productName");if(!t)return a.Z.json({error:"Product name is required"},{status:400});let o=m()[t.toLowerCase()]||0;return a.Z.json({productName:t,count:o})}catch(r){return console.error("Error in GET /api/product-count:",r),a.Z.json({error:"Internal server error"},{status:500})}}async function y(r){try{let{productName:e}=await r.json();if(!e||"string"!=typeof e||""===e.trim())return a.Z.json({error:"Valid product name is required"},{status:400});let t=e.toLowerCase().trim(),o=m();return o[t]=(o[t]||0)+1,function(r){try{f(),c().writeFileSync(l,JSON.stringify(r,null,2))}catch(r){console.error("Error writing product counts:",r)}}(o),a.Z.json({productName:e.trim(),count:o[t]})}catch(r){return console.error("Error in POST /api/product-count:",r),a.Z.json({error:"Internal server error"},{status:500})}}let g=new n.AppRouteRouteModule({definition:{kind:u.x.APP_ROUTE,page:"/api/product-count/route",pathname:"/api/product-count",filename:"route",bundlePath:"app/api/product-count/route"},resolvedPagePath:"/Users/doheekong/Downloads/spf_cursor_test/app/api/product-count/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:j,staticGenerationAsyncStorage:v,serverHooks:S,headerHooks:w,staticGenerationBailout:x}=g,P="/api/product-count/route";function q(){return(0,s.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:v})}}};var e=require("../../../webpack-runtime.js");e.C(r);var t=r=>e(e.s=r),o=e.X(0,[1638,6206],()=>t(6331));module.exports=o})();