"use strict";(()=>{var e={};e.id=2312,e.ids=[2312],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3831:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>h,originalPathname:()=>y,patchFetch:()=>b,requestAsyncStorage:()=>_,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>g});var r={};a.r(r),a.d(r,{GET:()=>l,POST:()=>d,PUT:()=>c});var n=a(5419),o=a(9108),i=a(9678),s=a(8070);let u={"royal-canin":[{id:"eval-demo-1",brandName:"royal-canin",overall_rating:4,palatability:4,digestibility:5,coat_quality:4,stool_quality:5,value_for_money:3,packaging_quality:4,availability:5,brand_trust:4,ingredient_transparency:3,customer_service:4,written_review:"우리 골든 리트리버가 정말 잘 먹어요. 소화도 잘 되고 변 상태가 좋아졌습니다. 다만 가격이 조금 비싼 편이에요.",recommend:!0,pet_info:{species:"dog",age:"3세",breed:"골든 리트리버",weight:"28kg",health_conditions:["없음"]},purchase_info:{product_line:"어덜트",feeding_duration:"6개월-1년",purchase_frequency:"월 1회",price_range:"8-12만원"},submittedAt:"2024-01-15T10:30:00.000Z",userId:"user-demo-1",helpful_votes:5,verified_purchase:!0},{id:"eval-demo-2",brandName:"royal-canin",overall_rating:3,palatability:3,digestibility:4,coat_quality:3,stool_quality:4,value_for_money:2,packaging_quality:4,availability:5,brand_trust:4,ingredient_transparency:2,customer_service:3,written_review:"품질은 괜찮지만 가격 대비해서는 아쉬운 부분이 있어요. 성분 정보도 좀 더 자세히 알려주면 좋겠습니다.",recommend:!1,pet_info:{species:"dog",age:"5세",breed:"시바견",weight:"12kg",health_conditions:["알레르기"]},purchase_info:{product_line:"어덜트",feeding_duration:"1-3개월",purchase_frequency:"첫 구매",price_range:"5-8만원"},submittedAt:"2024-01-20T14:20:00.000Z",userId:"user-demo-2",helpful_votes:2,verified_purchase:!0}],hills:[],orijen:[],acana:[]};async function l(e,{params:t}){try{let e=decodeURIComponent(t.brandName);u[e]||(u[e]=[]);let a=u[e],r=a.length,n={overall:0,palatability:0,digestibility:0,coat_quality:0,stool_quality:0,value_for_money:0,packaging_quality:0,availability:0,brand_trust:0,ingredient_transparency:0,customer_service:0},o=a.filter(e=>e.recommend).length;return r>0&&Object.keys(n).forEach(e=>{let t=a.reduce((t,a)=>t+(a[e]||0),0);n[e]=Math.round(t/r*10)/10}),s.Z.json({brandName:e,totalEvaluations:r,averageRatings:n,recommendationRate:r>0?Math.round(o/r*100):0,recentEvaluations:a.slice(-10).reverse()})}catch(e){return console.error("평가 데이터 조회 오류:",e),s.Z.json({error:"서버 오류가 발생했습니다."},{status:500})}}async function d(e,{params:t}){try{let a=decodeURIComponent(t.brandName),r=await e.json();u[a]||(u[a]=[]);let n={...r,id:`eval-${Date.now()}`,submittedAt:new Date().toISOString(),userId:`user-${Date.now()}`,helpful_votes:0,verified_purchase:!1};if(!n.brandName||n.overall_rating<1||n.overall_rating>5)return s.Z.json({error:"유효하지 않은 평가 데이터입니다."},{status:400});return u[a].push(n),s.Z.json({success:!0,message:"평가가 성공적으로 등록되었습니다.",evaluationId:n.id,totalEvaluations:u[a].length})}catch(e){return console.error("평가 저장 오류:",e),s.Z.json({error:"서버 오류가 발생했습니다."},{status:500})}}async function c(e,{params:t}){try{let a=decodeURIComponent(t.brandName),{evaluationId:r,helpful:n}=await e.json();if(!u[a])return s.Z.json({error:"브랜드를 찾을 수 없습니다."},{status:404});let o=u[a].find(e=>e.id===r);if(!o)return s.Z.json({error:"평가를 찾을 수 없습니다."},{status:404});return void 0!==n&&(o.helpful_votes+=n?1:-1,o.helpful_votes=Math.max(0,o.helpful_votes)),s.Z.json({success:!0,helpful_votes:o.helpful_votes})}catch(e){return console.error("평가 업데이트 오류:",e),s.Z.json({error:"서버 오류가 발생했습니다."},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/brands/[brandName]/evaluate/route",pathname:"/api/brands/[brandName]/evaluate",filename:"route",bundlePath:"app/api/brands/[brandName]/evaluate/route"},resolvedPagePath:"/Users/doheekong/Downloads/spf_cursor_test/app/api/brands/[brandName]/evaluate/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:_,staticGenerationAsyncStorage:v,serverHooks:m,headerHooks:h,staticGenerationBailout:g}=p,y="/api/brands/[brandName]/evaluate/route";function b(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:v})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1638,6206],()=>a(3831));module.exports=r})();